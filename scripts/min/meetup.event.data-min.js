function getEventDetails(e){var t=$.url(e).segment(2);attendees.length=0,null!=t&&($("#main").show(),meetupService.getEvent(t,function(e){var t=$("#eventList");if(t.empty(),null!=e){if(e.time>0){var n=new Date(e.time),i="<h3>"+e.name+"</h3><p>"+$.format.date(n,"MMM dd, yyyy h:mm a")+"</p>";$("<p>").data("event",e).html(i).appendTo($("<li>").appendTo(t))}}else t.html("<li>Sorry, the meeting could not be found.</li>")}),meetupService.getRsvps(t,"yes",function(e){if(e.results.length>0){var t=0;for(t=0;t<e.results.length;t++)attendees[t]=[e.results[t].member.member_id]}attendeeCount=attendees.length}))}function chooseWinnerId(){var e=Math.floor(Math.random()*attendees.length),t=attendees[e];getWinnerDetails(t),attendees=$.grep(attendees,function(e){return e!=t})}function getWinnerDetails(e){meetupService.getWinnerDetails(e,function(e){if(null!=e){$("#winnerInfo").show(),$("div").removeClass("alert-info");var t='<div class="span2 thumbnail alert alert-info" style="height:150px; text-align: center; position: relative;">';t+=null!=e.photo?'<div ><img src="'+e.photo.thumb_link+'" /></div>':'<div><img src="./images/nophoto.gif" /></div>',t+="<div><strong>"+e.name+"</strong></div>",t+="<div>"+e.city+", "+e.state+"</div>",t+='<span class="badge" style="position: absolute; bottom: 0;">'+(attendeeCount-attendees.length)+"</span>",t+="</div>",$("#winnerInfo2").prepend(t)}})}var attendees=new Array,attendeeCount=0;$(document).ready(function($){$("#chooseWinner").click(function(e){return e.preventDefault,chooseWinnerId(),!1}),$("#findEvent").click(function(e){return e.preventDefault,getEventDetails($("#eventUrl").val()),!1})});var meetupService=new function(){var e="https://api.meetup.com",t=function(t,n){$.getJSON(e+"/2/event/"+t+"?callback=?",{key:apiKey},function(e){n(e)})},n=function(t,n){$.getJSON(e+"/2/member/"+t+"?callback=?",{key:apiKey},function(e){n(e)})},i=function(t,n,i){$.getJSON(e+"/2/rsvps?callback=?",{key:apiKey,rsvp:"yes",event_id:t},function(e){i(e)})};return{getEvent:t,getRsvps:i,getWinnerDetails:n}};