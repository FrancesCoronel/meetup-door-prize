window.mu=window.mu||{},window.mu.Api=function(e,$){return function(t){var o=function(){if("localStorage"in e&&null!==e.localStorage)return{put:function(t,o){e.localStorage[t]=o},get:function(t){return e.localStorage[t]},del:function(t){e.removeItem(t)}};var t={};return{put:function(e,o){t[e]=o},get:function(e){return t[e]},del:function(e){t[e]=void 0}}},n=t.clientId||alert("clientId required");return storage=t.storage||o(),redirectUri=t.redirectUri||window.location.href,onAuthDenial=t.onAuthDenial||function(e){alert("override onAuthDenial: function(err)...")},onUnsupportedStorage=t.onUnsupportedStorage||function(){alert("override onUnsupportedStorage: function()...")},afterAuth=t.afterAuth||function(e,t){},onMember=t.onMember||function(e,t){alert("override onMember: funciton(mem, token) ...")},scopes=t.scopes||["ageless"],authorization="https://secure.meetup.com/oauth2/authorize/?response_type=token&client_id="+n+"&scope="+scopes.join(",")+"&redirect_uri="+redirectUri,member="https://api.meetup.com/2/member/self",requestAuthorization=function(){var t=500,o=350,n=(screen.height-o)/2,r=(screen.width-t)/2;e.open(authorization,"Meetup",["scrollbars=1,height=",o,",width=",t,",top=",n,",left=",r].join(""))},$(function(){if(storage){var t=storage;if(e.onMeetupAuth=function(e){t.put("mu_token",e),$.getJSON(member+"?callback=?",{access_token:t.get("mu_token")},function(o){var n={id:o.id,name:o.name,link:o.link,photo:o.photo};t.put("mu_member",JSON.stringify(n)),afterAuth(n,e),onMember(n,e)})},e.onMeetupDenial=function(e){onAuthDenial(e)},t.get("mu_token")&&t.get("mu_member"))onMember(JSON.parse(t.get("mu_member")),t.get("mu_token"));else{var o=window.location.hash;if(o){for(var n=o.substring(1).split("&"),r=n.length,i={},u=/(\S+)=(\S+)/,a=function(e){if(u.test(e)){var t=u.exec(e).splice(1,2);i[t[0]]=t[1]}};r--;)a(n[r]);i.access_token?(e.close(),e.opener.onMeetupAuth(i.access_token,i.expires_in)):i.error&&(e.close(),e.opener.onMeetupDenial(i.error))}}}else onUnsupportedStorage()}),{logout:function(t){e.localStorage.removeItem("mu_auth"),e.localStorage.removeItem("mu_member"),t&&t()},login:function(){requestAuthorization()}}}}(window,jQuery);